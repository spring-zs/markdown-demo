{"version":3,"sources":["autoc.js"],"names":["root","factory","define","amd","exports","module","AutocJs","this","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_createClass","value","options","headings","elements","getElements","data","getData","article","set","defaults","document","querySelector","get","generateHeadings","querySelectorAll","chapters","generateChapters","destroy","initialize","render","addListeners","prop","val","utils","Utils","attrs","attributes","arguments","isObject","extend","nodes","Array","forEach","call","node","push","id","guid","tagName","level","parseInt","replace","previous","heading","current","pid","_generatePid","rel","text","stripTags","trim","innerHTML","generateChapterCode","groups","groupBy","group","chapter","index","member","code","String","renderAnchors","renderOutline","_this","dom","DOM","anchorURL","el","icon","createElement","className","url","anchorStyle","anchor","aria-hidden","href","addClass","insertBefore","firstChild","appendChild","anchors","position","toLowerCase","renderOutsideOutline","renderInsideOutline","renderChapters","title","header","list","body","switcher","top","footer","modal","overlay","wrap","_this2","li","parent","ul","link","children","getElementById","_this3","rootElement","scrollTop","isScrollUp","MAX_SCROLL_HEIGHT","scrollHeight","window","innerHeight","MAX_SCROLL_TOP","count","scroll","timer","stop","easeInQuad","setTimeout","clearTimeout","removeClass","hasClass","hide","show","removeListeners","parentNode","removeChild","remove","off","Events","_handleArticleHeadingMouseEnter","_handleArticleHeadingMouseLeave","_handleSwitcherClick","_handleTopClick","_handleOverlayClick","_handleChapterClick","_handleHeadingAnchorClick","delegate","evt","delegateTarget","getAttribute","events","offsetTop","offset","isEmpty","scrollTo","toggle","instance","TypeError","_classCallCheck","selector","anchorAt","isGenerateOutline","isGenerateOutlineChapterCode","isGenerateHeadingChapterCode","isGenerateHeadingAnchor","uuid","o","toString","apply","isArray","isElement","nodeName","nodeType","str","prefix","JSON","stringify","cb","keys","map","x","origin","source","hasOwnProperty","element","attr","setAttribute","child","childNode","createTextNode","style","cssText","allClass","match","RegExp","left","offsetLeft","offsetParent","type","callback","context","capture","_delegateWrapper","addEventListener","e","getDelegateTarget","removeEventListener","stopPropagation","preventDefault","event","cancelBubble","returnValue","parentElement","differ","jQuery","$","fn","articleOutline","$article"],"mappings":"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","file":"autoc.min.js","sourcesContent":[";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.AutocJs = factory();\n  }\n}(this, function() {\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AutocJs = function () {\n    function AutocJs(options) {\n        _classCallCheck(this, AutocJs);\n\n        // 所有配置属性\n        this.attributes = {};\n\n        // 控件的所有 DOM 节点\n        this.elements = {\n            article: null,\n            wrap: null,\n            modal: null,\n            header: null,\n            title: null,\n            body: null,\n            list: null,\n            footer: null,\n            switcher: null,\n            top: null,\n            overlay: null,\n            anchors: []\n\n            // 控件的数据\n        };this.data = {\n            headings: [],\n            chapters: []\n        };\n\n        this.timer = null;\n\n        // 运行程序\n        this.initialize(options).render().addListeners();\n\n        return this;\n    }\n\n    _createClass(AutocJs, [{\n        key: 'initialize',\n        value: function initialize(options) {\n            var elements = this.getElements();\n            var data = this.getData();\n            var article = void 0;\n            var headings = void 0;\n\n            // 舒适化配置\n            this.set(AutocJs.defaults).set(options);\n\n            article = document.querySelector(this.get('article'));\n            headings = this.generateHeadings(article.querySelectorAll(this.get('selector')));\n\n            elements.article = article;\n\n            data.headings = headings;\n            data.chapters = this.generateChapters(headings);\n\n            return this;\n        }\n    }, {\n        key: 'reload',\n        value: function reload(options) {\n            this.destroy().initialize(options).render().addListeners();\n\n            return this;\n        }\n\n        /**\r\n         * 设置属性\r\n         * @param {String|Object} prop\r\n         * @param {*} [val]\r\n         * @returns {Autoc}\r\n         */\n\n    }, {\n        key: 'set',\n        value: function set(prop, val) {\n            var utils = AutocJs.Utils;\n            var attrs = this.attributes;\n\n            if (arguments.length === 2) {\n                attrs[prop] = val;\n            } else {\n                if (utils.isObject(prop)) {\n                    utils.extend(attrs, prop);\n                }\n            }\n\n            return this;\n        }\n\n        // 获取属性值\n\n    }, {\n        key: 'get',\n        value: function get(prop) {\n            return this.attributes[prop];\n        }\n    }, {\n        key: 'getElements',\n        value: function getElements() {\n            return this.elements;\n        }\n    }, {\n        key: 'getData',\n        value: function getData() {\n            return this.data;\n        }\n    }, {\n        key: 'generateHeadings',\n        value: function generateHeadings(nodes) {\n            var headings = [];\n            var utils = AutocJs.Utils;\n\n            Array.prototype.forEach.call(nodes, function (node) {\n                headings.push({\n                    id: utils.guid('outline-heading'),\n                    node: node,\n                    tagName: node.tagName,\n                    level: parseInt(node.tagName.replace(/[h]/i, ''), 10)\n                });\n            });\n\n            return headings;\n        }\n    }, {\n        key: 'generateChapters',\n        value: function generateChapters(headings) {\n            var utils = AutocJs.Utils;\n            var chapters = [];\n            var previous = 1;\n            var level = 0;\n\n            headings.forEach(function (heading, i) {\n                var current = heading.level;\n                var pid = -1;\n\n                // 当前标题的（标题标签）序号 > 前一个标题的序号：两个相连的标题是父标题 -> 子标题关系；\n                // h2 （前一个标题）\n                // h3 （当前标题）\n                if (current > previous) {\n                    level += 1;\n\n                    // 第一层级的 pid 是 -1\n                    if (level === 1) {\n                        pid = -1;\n                    } else {\n                        pid = i - 1;\n                    }\n                }\n                // 当前标题的（标题标签）序号 = 前一个标题的序号\n                // h2 （前一个标题）\n                // h2 （当前标题）\n                // 当前标题的（标题标签）序号 < 前一个标题的序号，并且当前标题序号 > 当前的级别\n                // h2\n                // h4 （前一个标题）\n                // h3 （当前标题：这种情况我们还是任务 h3 是 h2 的下一级章节）\n                else if (current === previous || current < previous && current > level) {\n                        // H1 的层级肯定是 1\n                        if (current === 1) {\n                            level = 1;\n\n                            pid = -1;\n                        } else {\n                            pid = chapters[i - 1].pid;\n                        }\n                    } else if (current <= level) {\n                        // H1 的层级肯定是 1\n                        if (current === 1) {\n                            level = 1;\n                        } else {\n                            level = level - (previous - current);\n\n                            if (level <= 1) {\n                                level = 1;\n                            }\n                        }\n\n                        // 第一级的标题\n                        if (level === 1) {\n                            pid = -1;\n                        } else {\n                            // 虽然看上去差点，不过能工作啊\n                            pid = AutocJs._generatePid(chapters, previous - current, i);\n                        }\n                    }\n\n                previous = current;\n\n                chapters.push({\n                    id: i,\n                    pid: pid,\n                    level: level,\n                    rel: heading.id,\n                    text: utils.stripTags(utils.trim(heading.node.innerHTML))\n                });\n            });\n\n            this.generateChapterCode(chapters);\n\n            return chapters;\n        }\n    }, {\n        key: 'generateChapterCode',\n        value: function generateChapterCode(chapters) {\n            var utils = AutocJs.Utils;\n            var groups = utils.groupBy(chapters, 'pid');\n\n            groups.forEach(function (group) {\n                group.forEach(function (chapter, i) {\n                    chapter.index = i + 1;\n                });\n            });\n\n            groups.forEach(function (group) {\n                group.forEach(function (member) {\n                    chapters.forEach(function (chapter) {\n                        if (chapter.pid === -1) {\n                            chapter.code = String(chapter.index);\n                        } else {\n                            if (chapter.pid === member.id) {\n                                chapter.code = member.code + '.' + chapter.index;\n                            }\n                        }\n                    });\n                });\n            });\n\n            return this;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            this.renderAnchors().renderOutline();\n\n            return this;\n        }\n    }, {\n        key: 'renderAnchors',\n        value: function renderAnchors() {\n            var _this = this;\n\n            var dom = AutocJs.Utils.DOM;\n            var data = this.getData();\n            var headings = data.headings;\n            var chapters = data.chapters;\n            var elements = this.getElements();\n            var anchorURL = this.get('anchorURL');\n\n            headings.forEach(function (heading, i) {\n                var el = heading.node;\n                var icon = dom.createElement('i', {\n                    className: 'icon icon-section outline-heading-icon'\n                });\n                var url = anchorURL ? anchorURL : '#' + heading.id;\n                var anchorStyle = _this.get('anchorAt') === 'front' ? 'outline-heading-anchor-at-front' : 'outline-heading-anchor-at-end';\n                var anchor = dom.createElement('a', {\n                    'aria-hidden': true,\n                    className: 'outline-heading-anchor ' + anchorStyle + ' outline-link outline-hidden',\n                    rel: heading.id,\n                    href: url\n                }, [icon]);\n                var code = void 0;\n\n                dom.addClass(el, 'outline-heading');\n                el.id = heading.id;\n\n                if (_this.get('isGenerateHeadingChapterCode')) {\n                    code = dom.createElement('span', {\n                        className: 'outline-heading-code'\n                    }, [chapters[i].code]);\n\n                    el.insertBefore(code, el.firstChild);\n                }\n\n                if (_this.get('isGenerateHeadingAnchor')) {\n                    el.appendChild(anchor);\n                    elements.anchors.push(anchor);\n                }\n            });\n\n            return this;\n        }\n    }, {\n        key: 'renderOutline',\n        value: function renderOutline() {\n            var position = this.get('position').toLowerCase();\n\n            if (!this.get('isGenerateOutline')) {\n                return this;\n            }\n\n            // 以导航菜单形式显示\n            switch (position) {\n                case 'outside':\n                    this.renderOutsideOutline();\n                    break;\n                case 'inside':\n                    this.renderInsideOutline();\n                    break;\n            }\n\n            this.renderChapters();\n\n            return this;\n        }\n    }, {\n        key: 'renderOutsideOutline',\n        value: function renderOutsideOutline() {\n            var utils = AutocJs.Utils;\n            var dom = utils.DOM;\n            var elements = this.getElements();\n            var title = this.get('title');\n\n            // 创建导航头部\n            elements.title = dom.createElement('h2', {\n                className: 'outline-outside-title'\n            }, [title]);\n            elements.header = dom.createElement('div', {\n                className: 'outline-outside-header'\n            }, [elements.title]);\n\n            elements.list = dom.createElement('ul', {\n                className: 'outline-outside-list'\n            });\n\n            elements.body = dom.createElement('div', {\n                className: 'outline-outside-body'\n            }, [elements.list]);\n\n            elements.switcher = dom.createElement('div', {\n                className: 'outline-outside-button outline-outside-switcher'\n            }, [dom.createElement('i', {\n                className: 'icon icon-menu'\n            })]);\n\n            elements.top = dom.createElement('div', {\n                className: 'outline-outside-button outline-outside-top'\n            }, [dom.createElement('a', {\n                href: '#top',\n                className: 'outline-outside-top'\n            }, [dom.createElement('i', {\n                className: 'icon icon-arrow-up'\n            })])]);\n\n            elements.footer = dom.createElement('div', {\n                className: 'outline-outside-footer'\n            }, [elements.switcher, elements.top]);\n\n            // 创建导航菜单主体框架\n            elements.modal = dom.createElement('div', {\n                className: 'outline-outside-modal'\n            }, [elements.header, elements.body, elements.footer]);\n\n            // 创建导航菜单遮罩层\n            elements.overlay = dom.createElement('div', {\n                className: 'outline-outside-overlay outline-hidden'\n            });\n\n            // 创建导航容器\n            elements.wrap = dom.createElement('div', {\n                className: 'outline-outside'\n            }, [elements.modal, elements.overlay]);\n\n            document.body.appendChild(elements.wrap);\n\n            return this;\n        }\n    }, {\n        key: 'renderInsideOutline',\n        value: function renderInsideOutline() {\n            var utils = AutocJs.Utils;\n            var dom = utils.DOM;\n            var elements = this.getElements();\n            var title = this.get('title');\n\n            // 创建导航头部\n            elements.title = dom.createElement('h2', {\n                className: 'outline-inside-title'\n            }, [title]);\n            elements.header = dom.createElement('div', {\n                className: 'outline-inside-header'\n            }, [elements.title]);\n\n            elements.list = dom.createElement('ul', {\n                className: 'outline-inside-list'\n            });\n\n            elements.body = dom.createElement('div', {\n                className: 'outline-inside-body'\n            }, [elements.list]);\n\n            // 创建导航菜单主体框架\n            elements.wrap = dom.createElement('div', {\n                className: 'outline-inside'\n            }, [elements.header, elements.body]);\n\n            elements.article.insertBefore(elements.wrap, elements.article.firstChild);\n\n            return this;\n        }\n    }, {\n        key: 'renderChapters',\n        value: function renderChapters() {\n            var _this2 = this;\n\n            var chapters = this.getData().chapters;\n            var dom = AutocJs.Utils.DOM;\n            var list = this.getElements().list;\n\n            chapters.forEach(function (chapter) {\n                var pid = chapter.pid;\n                var parent = void 0;\n                var ul = void 0;\n                var li = void 0;\n                var code = void 0;\n                var text = dom.createElement('span', {\n                    className: 'outline-chapter-text'\n                }, [chapter.text]);\n                var link = dom.createElement('a', {\n                    className: 'outline-link',\n                    href: '#' + chapter.rel,\n                    rel: chapter.rel\n                }, [text]);\n\n                var children = [];\n\n                if (_this2.get('isGenerateOutlineChapterCode')) {\n                    code = dom.createElement('span', {\n                        className: 'outline-chapter-code'\n                    }, [chapter.code]);\n\n                    children.push(code);\n                }\n\n                children.push(link);\n\n                li = dom.createElement('li', {\n                    id: 'outline-chapter-' + chapter.id,\n                    className: 'outline-chapter'\n                }, children);\n\n                if (pid === -1) {\n                    list.appendChild(li);\n                } else {\n                    parent = document.getElementById('outline-chapter-' + pid);\n                    ul = document.getElementById('outline-subject-' + pid);\n\n                    if (!ul) {\n                        ul = dom.createElement('ul', {\n                            id: 'outline-subject-' + pid,\n                            className: 'outline-subject'\n                        }, [li]);\n\n                        parent.appendChild(ul);\n                    } else {\n                        ul.appendChild(li);\n                    }\n                }\n            });\n\n            return this;\n        }\n    }, {\n        key: 'scrollTo',\n        value: function scrollTo(top) {\n            var _this3 = this;\n\n            var utils = AutocJs.Utils;\n            var elements = document.querySelectorAll('html,body');\n            var rootElement = elements[0].scrollTop - elements[1].scrollTop >= 0 ? elements[0] : elements[1];\n            var scrollTop = rootElement.scrollTop;\n            var isScrollUp = top - rootElement.scrollTop < 0;\n            var MAX_SCROLL_HEIGHT = rootElement.scrollHeight - window.innerHeight;\n            var MAX_SCROLL_TOP = top - MAX_SCROLL_HEIGHT <= 0 ? top : MAX_SCROLL_HEIGHT;\n            var SPEED = 30;\n            var count = 0;\n            var scroll = function scroll() {\n\n                if (_this3.timer) {\n                    _this3.stop();\n                }\n\n                count += 1;\n\n                if (isScrollUp) {\n                    scrollTop -= utils.easeInQuad(count);\n                    rootElement.scrollTop = scrollTop;\n\n                    if (rootElement.scrollTop <= top) {\n                        rootElement.scrollTop = top;\n                        _this3.stop();\n                        return false;\n                    }\n                } else {\n                    scrollTop += utils.easeInQuad(count);\n                    rootElement.scrollTop = scrollTop;\n\n                    if (rootElement.scrollTop >= MAX_SCROLL_TOP) {\n                        rootElement.scrollTop = MAX_SCROLL_TOP;\n                        _this3.stop();\n                        return false;\n                    }\n                }\n\n                _this3.timer = setTimeout(scroll, SPEED);\n            };\n\n            scroll();\n\n            return this;\n        }\n    }, {\n        key: 'stop',\n        value: function stop() {\n            clearTimeout(this.timer);\n            this.timer = null;\n\n            return this;\n        }\n    }, {\n        key: 'show',\n        value: function show() {\n            var elements = this.getElements();\n            var dom = AutocJs.Utils.DOM;\n\n            dom.addClass(elements.modal, 'outline-outside-modal-opened');\n            dom.removeClass(elements.overlay, 'outline-hidden');\n\n            return this;\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            var elements = this.getElements();\n            var dom = AutocJs.Utils.DOM;\n\n            dom.removeClass(elements.modal, 'outline-outside-modal-opened');\n            dom.addClass(elements.overlay, 'outline-hidden');\n\n            return this;\n        }\n    }, {\n        key: 'toggle',\n        value: function toggle() {\n            if (AutocJs.Utils.DOM.hasClass(this.getElements().modal, 'outline-outside-modal-opened')) {\n                this.hide();\n            } else {\n                this.show();\n            }\n\n            return this;\n        }\n    }, {\n        key: 'remove',\n        value: function remove() {\n            var elements = this.getElements();\n            var wrap = elements.wrap;\n\n            this.removeListeners();\n\n            if (this.get('isGenerateHeadingAnchor')) {\n                elements.anchors.forEach(function (anchor) {\n                    anchor.parentNode.removeChild(anchor);\n                });\n            }\n\n            wrap.parentNode.removeChild(wrap);\n\n            return this;\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.remove();\n\n            // 所有配置属性\n            this.attributes = {};\n\n            // 控件的所有 DOM 节点\n            this.elements = {\n                article: null,\n                wrap: null,\n                modal: null,\n                header: null,\n                title: null,\n                body: null,\n                list: null,\n                footer: null,\n                switcher: null,\n                top: null,\n                overlay: null,\n                anchors: []\n\n                // 控件的数据\n            };this.data = {\n                headings: [],\n                chapters: []\n            };\n\n            this.timer = null;\n\n            return this;\n        }\n    }, {\n        key: 'removeListeners',\n        value: function removeListeners() {\n            var elements = this.getElements();\n            var article = elements.article;\n            var wrap = elements.wrap;\n            var utils = AutocJs.Utils;\n            var off = utils.Events.off;\n            var position = this.get('position').toLowerCase();\n\n            off(article, 'mouseenter', this._handleArticleHeadingMouseEnter);\n            off(article, 'mouseleave', this._handleArticleHeadingMouseLeave);\n\n            if (position === 'outside') {\n                off(wrap, 'click', this._handleSwitcherClick);\n                off(wrap, 'click', this._handleTopClick);\n                off(wrap, 'click', this._handleOverlayClick);\n            }\n\n            off(wrap, 'click', this._handleChapterClick);\n\n            if (this.get('isGenerateHeadingAnchor')) {\n                off(article, 'click', this._handleHeadingAnchorClick);\n            }\n\n            return this;\n        }\n    }, {\n        key: 'addListeners',\n        value: function addListeners() {\n            var elements = this.getElements();\n            var article = elements.article;\n            var wrap = elements.wrap;\n            var utils = AutocJs.Utils;\n            var events = utils.Events;\n            var delegate = events.delegate;\n            var position = this.get('position').toLowerCase();\n\n            delegate(article, '.outline-heading', 'mouseenter', this._handleArticleHeadingMouseEnter, this);\n            delegate(article, '.outline-heading', 'mouseleave', this._handleArticleHeadingMouseLeave, this);\n\n            if (position === 'outside') {\n                delegate(wrap, '.outline-outside-switcher', 'click', this._handleSwitcherClick, this);\n                delegate(wrap, '.outline-outside-top', 'click', this._handleTopClick, this);\n                delegate(wrap, '.outline-outside-overlay', 'click', this._handleOverlayClick, this);\n            }\n\n            delegate(wrap, '.outline-link', 'click', this._handleChapterClick, this);\n\n            if (this.get('isGenerateHeadingAnchor')) {\n                delegate(article, '.outline-heading-anchor', 'click', this._handleHeadingAnchorClick, this);\n            }\n\n            return this;\n        }\n    }, {\n        key: '_handleArticleHeadingMouseEnter',\n        value: function _handleArticleHeadingMouseEnter(evt) {\n            var target = evt.delegateTarget;\n            var anchor = target.querySelector('.outline-heading-anchor');\n\n            if (anchor) {\n                AutocJs.Utils.DOM.removeClass(anchor, 'outline-hidden');\n            }\n\n            return this;\n        }\n    }, {\n        key: '_handleArticleHeadingMouseLeave',\n        value: function _handleArticleHeadingMouseLeave(evt) {\n            var target = evt.delegateTarget;\n            var anchor = target.querySelector('.outline-heading-anchor');\n\n            if (anchor) {\n                AutocJs.Utils.DOM.addClass(anchor, 'outline-hidden');\n            }\n\n            return this;\n        }\n    }, {\n        key: '_handleHeadingAnchorClick',\n        value: function _handleHeadingAnchorClick(evt) {\n            var anchor = evt.delegateTarget;\n            var rel = anchor.getAttribute('rel');\n            var heading = document.querySelector('#' + rel);\n            var utils = AutocJs.Utils;\n            var dom = utils.DOM;\n            var events = utils.Events;\n            var offsetTop = dom.offset(heading).top;\n\n            if (utils.isEmpty(this.get('anchorURL'))) {\n                this.stop().scrollTo(offsetTop);\n                events.stop(evt);\n            }\n\n            return this;\n        }\n    }, {\n        key: '_handleChapterClick',\n        value: function _handleChapterClick(evt) {\n            var anchor = evt.delegateTarget;\n            var rel = anchor.getAttribute('rel');\n            var heading = document.querySelector('#' + rel);\n            var utils = AutocJs.Utils;\n            var dom = utils.DOM;\n            var events = utils.Events;\n            var offsetTop = dom.offset(heading).top;\n\n            if (this.get('position') === 'outside') {\n                this.hide();\n            }\n\n            this.stop().scrollTo(offsetTop);\n            events.stop(evt);\n\n            return this;\n        }\n    }, {\n        key: '_handleSwitcherClick',\n        value: function _handleSwitcherClick() {\n            this.toggle();\n\n            return this;\n        }\n    }, {\n        key: '_handleTopClick',\n        value: function _handleTopClick(evt) {\n            var utils = AutocJs.Utils;\n            var events = utils.Events;\n\n            this.stop().scrollTo(0);\n\n            events.stop(evt);\n\n            return this;\n        }\n    }, {\n        key: '_handleOverlayClick',\n        value: function _handleOverlayClick() {\n            this.hide();\n\n            return this;\n        }\n    }]);\n\n    return AutocJs;\n}();\n\n/**\r\n * Outline 对象的默认配置信息\r\n *\r\n * @type {Object}\r\n */\n\n\nAutocJs.defaults = {\n    // 文章正文 DOM 节点的 ID 选择器\n    article: '#article',\n    // 要收集的标题选择器\n    selector: 'h1,h2,h3,h4,h5,h6',\n    // 侧边栏导航的标题\n    title: '文章导读',\n    // 文章导读导航的位置\n    // outside - 以侧边栏菜单形式显示（默认值）\n    // inside - 在文章正文一开始的地方显示\n    position: 'outside',\n    // 标题图标链接的 URL 地址\n    // （默认）没有设置定制，点击链接页面滚动到标题位置\n    // 设置了链接地址，则不会滚动定位\n    anchorURL: '',\n    // 链接的显示位置\n    // front - 在标题最前面（默认值）\n    // back - 在标题后面\n    anchorAt: 'front',\n    // 是否生成文章导读导航\n    isGenerateOutline: true,\n    // 是否在文章导读导航中显示段落章节编号\n    isGenerateOutlineChapterCode: true,\n    // 是否在正文的文章标题中显示段落章节编号\n    isGenerateHeadingChapterCode: false,\n    // 是否在正文的文章标题中创建锚点\n    isGenerateHeadingAnchor: true\n\n    /**\r\n     * 常用的静态方法集\r\n     *\r\n     * @type {Object}\r\n     */\n};AutocJs.Utils = {\n    uuid: 0,\n    isObject: function isObject(o) {\n        return Object.prototype.toString.apply(o) === '[object Object]' && o !== null;\n    },\n    isArray: function isArray(o) {\n        if (Array.isArray) {\n            return Array.isArray(o);\n        } else {\n            return Object.prototype.toString.apply(o) === '[object Array]';\n        }\n    },\n    isElement: function isElement(o) {\n        return o && o.nodeName && o.tagName && o.nodeType === 1;\n    },\n    isEmpty: function isEmpty(str) {\n        return typeof str === 'string' && str === '';\n    },\n    guid: function guid(prefix) {\n        var utils = AutocJs.Utils;\n\n        utils.uuid += 1;\n\n        return prefix ? prefix + '-' + utils.uuid : 'guid-' + utils.uuid;\n    },\n    trim: function trim(str) {\n        return str.replace(/^\\s+/g, '').replace(/\\s+$/g, '');\n    },\n    stripTags: function stripTags(str) {\n        return str.replace(/<\\/?[^>]+(>|$)/g, '');\n    },\n    groupBy: function groupBy(list, prop) {\n        var groups = {};\n        var cb = function cb(o) {\n            return [o[prop]];\n        };\n\n        list.forEach(function (o) {\n            var group = JSON.stringify(cb(o));\n\n            groups[group] = groups[group] || [];\n            groups[group].push(o);\n        });\n\n        return Object.keys(groups).map(function (group) {\n            return groups[group];\n        });\n    },\n    easeInQuad: function easeInQuad(x) {\n        return x * x;\n    },\n    extend: function extend(origin, source) {\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                origin[prop] = source[prop];\n            }\n        }\n    }\n\n    /**\r\n     * DOM 相关的静态方法集\r\n     *\r\n     * @type {Object}\r\n     */\n};AutocJs.Utils.DOM = {\n    /**\r\n     * 创建 DOM 节点，并添加属性和子节点\r\n     *\r\n     * @param {String} tagName - 标签名称\r\n     * @param {Object} attributes - 属性对象\r\n     * @param {Array} children - 子节点数组\r\n     * @returns {HTMLElement}\r\n     */\n    createElement: function createElement(tagName, attributes, children) {\n        var utils = AutocJs.Utils;\n        var dom = utils.DOM;\n        var element = document.createElement(tagName);\n\n        for (var attr in attributes) {\n            if (attributes.hasOwnProperty(attr)) {\n                dom.setAttribute(element, attr, attributes[attr]);\n            }\n        }\n\n        if (utils.isArray(children)) {\n            children.forEach(function (child) {\n                var childNode = utils.isElement(child) ? child : document.createTextNode(child);\n\n                element.appendChild(childNode);\n            });\n        }\n\n        return element;\n    },\n    /**\r\n     * 给 DOM 节点设置属性/值\r\n     *\r\n     * @param {HTMLElement} el - DOM 节点\r\n     * @param {String} attr - 属性名称\r\n     * @param {String|Number|Boolean} value - 属性值\r\n     */\n    setAttribute: function setAttribute(el, attr, value) {\n        var tagName = el.tagName.toLowerCase();\n\n        switch (attr) {\n            case 'style':\n                el.style.cssText = value;\n                break;\n            case 'value':\n                if (tagName === 'input' || tagName === 'textarea') {\n                    el.value = value;\n                } else {\n                    el.setAttribute(attr, value);\n                }\n                break;\n            case 'className':\n                el.className = value;\n                break;\n            default:\n                el.setAttribute(attr, value);\n                break;\n        }\n    },\n    /**\r\n     * 检测 DOM 节点是否包含名为 className 的样式\r\n     *\r\n     * @param {HTMLElement} el - DOM 节点\r\n     * @param {String} className - 样式名称\r\n     * @returns {*}\r\n     */\n    hasClass: function hasClass(el, className) {\n        var allClass = el.className;\n\n        if (!allClass) {\n            return false;\n        }\n\n        return allClass.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'));\n    },\n\n    /**\r\n     * 给 DOM 节点添加名为 className 的样式\r\n     *\r\n     * @param {HTMLElement} el - DOM 节点\r\n     * @param {String} className - 样式名称\r\n     * @returns {Boolean}\r\n     */\n    addClass: function addClass(el, className) {\n        var allClass = el.className;\n\n        if (AutocJs.Utils.DOM.hasClass(el, className)) {\n            return false;\n        }\n\n        allClass += allClass.length > 0 ? ' ' + className : className;\n\n        el.className = allClass;\n    },\n\n    /**\r\n     * 移除 DOM 节点的 className 样式\r\n     *\r\n     * @param {HTMLElement} el - DOM 节点\r\n     * @param {String} className - 样式名称\r\n     * @returns {Boolean}\r\n     */\n    removeClass: function removeClass(el, className) {\n        var utils = AutocJs.Utils;\n        var allClass = el.className;\n\n        if (!allClass || !utils.DOM.hasClass(el, className)) {\n            return false;\n        }\n\n        allClass = utils.trim(allClass.replace(className, ''));\n\n        el.className = allClass;\n    },\n\n    /**\r\n     * 获取 DOM 节点相对于窗口的 left 和 top 值\r\n     *\r\n     * @param {HTMLElement} el - DOM 节点\r\n     * @returns {{left: Number, top: Number}}\r\n     */\n    offset: function offset(el) {\n        var dom = AutocJs.Utils.DOM;\n        var left = dom.offsetLeft(el);\n        var top = dom.offsetTop(el);\n\n        return {\n            left: left,\n            top: top\n        };\n    },\n\n    /**\r\n     * 获取 DOM 节点相对于窗口的 left （纵坐标）值\r\n     *\r\n     * @param {HTMLElement} el - DOM 节点\r\n     * @returns {Number}\r\n     */\n    offsetTop: function offsetTop(el) {\n        var dom = AutocJs.Utils.DOM;\n        var top = el.offsetTop;\n\n        if (el.offsetParent !== null) {\n            top += dom.offsetTop(el.offsetParent);\n        }\n\n        return top;\n    },\n\n    /**\r\n     * 获取 DOM 节点相对于窗口的 left（横坐标）值\r\n     *\r\n     * @param {HTMLElement} el - DOM 节点\r\n     * @returns {Number}\r\n     */\n    offsetLeft: function offsetLeft(el) {\n        var dom = AutocJs.Utils.DOM;\n        var left = el.offsetLeft;\n\n        if (el.offsetParent !== null) {\n            left += dom.offsetLeft(el.offsetParent);\n        }\n\n        return left;\n    }\n};\n\n/**\r\n * 事件相关的静态方法集\r\n *\r\n * @type {Object}\r\n */\nAutocJs.Utils.Events = {\n    /**\r\n     * 绑定代理事件\r\n     * ========================================================\r\n     * 说明：代码修改至 Nicolas Gallagher 的 delegate.js\r\n     * 项目 GitHub 地址：https://github.com/necolas/delegate.js\r\n     * ========================================================\r\n     * @param {HTMLElement} el - 绑定代理事件的 DOM 节点\r\n     * @param {String} selector - 触发 el 代理事件的 DOM 节点的选择器\r\n     * @param {String} type - 事件类型\r\n     * @param {Function} callback - 绑定事件的回调函数\r\n     * @param {Object} [context] - callback 回调函数的 this 上下文（默认值：el）\r\n     * @param {Boolean} [capture] - 是否采用事件捕获（默认值：false - 事件冒泡）\r\n     */\n    delegate: function delegate(el, selector, type, callback, context, capture) {\n        var wrapper = function wrapper(e) {\n            if (e.delegateTarget = AutocJs.getDelegateTarget(el, e.target, selector)) {\n                callback.call(context || el, e);\n            }\n        };\n\n        if (type === 'mouseenter' || type === 'mouseleave') {\n            capture = true;\n        }\n\n        callback._delegateWrapper = callback;\n        el.addEventListener(type, wrapper, capture || false);\n    },\n\n    /**\r\n     * 取消事件绑定\r\n     * ========================================================\r\n     * 说明：代码修改至 Nicolas Gallagher 的 delegate.js\r\n     * 项目 GitHub 地址：https://github.com/necolas/delegate.js\r\n     * ========================================================\r\n     * @param {HTMLElement} el - 取消绑定（代理）事件的 DOM 节点\r\n     * @param {String} type - 事件类型\r\n     * @param {Function} callback - 绑定事件的回调函数\r\n     * @param {Boolean} [capture] - 是否采用事件捕获（默认值：false - 事件冒泡）\r\n     */\n    off: function off(el, type, callback, capture) {\n        if (callback._delegateWrapper) {\n            callback = callback._delegateWrapper;\n            delete callback._delegateWrapper;\n        }\n\n        if (type === 'mouseenter' || type === 'mouseleave') {\n            capture = true;\n        }\n\n        el.removeEventListener(type, callback, capture || false);\n    },\n\n    /**\r\n     * 停止事件（阻止默认行为和阻止事件的捕获或冒泡）\r\n     *\r\n     * @param {Event} evt - 事件对象\r\n     */\n    stop: function stop(evt) {\n        var events = AutocJs.Utils.Events;\n\n        events.stopPropagation(evt);\n        events.preventDefault(evt);\n    },\n\n    /**\r\n     * 终止事件在传播过程的捕获或冒泡\r\n     *\r\n     * @param {Event} evt - 事件对象\r\n     */\n    stopPropagation: function stopPropagation(evt) {\n        var event = window.event;\n\n        if (evt.stopPropagation) {\n            evt.stopPropagation();\n        } else {\n            event.cancelBubble = true;\n        }\n    },\n\n    /**\r\n     * 阻止事件的默认行为\r\n     *\r\n     * @param {Event} evt - 事件对象\r\n     */\n    preventDefault: function preventDefault(evt) {\n        var event = window.event;\n\n        if (evt.preventDefault) {\n            evt.preventDefault();\n        } else {\n            event.returnValue = false;\n        }\n    }\n};\n\n/**\r\n * 通过 className 获得事件代理节点的事件代理目标节点\r\n * ========================================================\r\n * 说明：代码修改至 Nicolas Gallagher 的 delegate.js\r\n * 项目 GitHub 地址：https://github.com/necolas/delegate.js\r\n * ========================================================\r\n * @static\r\n * @param {HTMLElement} el - 绑定事件代理的节点\r\n * @param target - （触发事件后）事件的目标对象\r\n * @param selector - 目标节点的类选择器\r\n * @returns {HTMLElement|Null}\r\n */\nAutocJs.getDelegateTarget = function (el, target, selector) {\n    while (target && target !== el) {\n        if (AutocJs.Utils.DOM.hasClass(target, selector.replace('.', ''))) {\n            return target;\n        }\n\n        target = target.parentElement;\n    }\n\n    return null;\n};\n\n/**\r\n * 通过索引和两个标题之前的等级差值获得当前标题节点的父级标题节点的 pid\r\n *\r\n * @static\r\n * @private\r\n * @param {Array} chapters\r\n * @param {Number} differ\r\n * @param {Number} index\r\n * @returns {*}\r\n */\nAutocJs._generatePid = function (chapters, differ, index) {\n    var pid = void 0;\n\n    // 最大只有 5 级的差距\n    switch (differ) {\n        case 2:\n            pid = chapters[chapters[chapters[index - 1].pid].pid].pid;\n            break;\n        case 3:\n            pid = chapters[chapters[chapters[chapters[index - 1].pid].pid].pid].pid;\n            break;\n        case 4:\n            pid = chapters[chapters[chapters[chapters[chapters[index - 1].pid].pid].pid].pid].pid;\n            break;\n        case 5:\n            pid = chapters[chapters[chapters[chapters[chapters[chapters[index - 1].pid].pid].pid].pid].pid].pid;\n            break;\n        default:\n            pid = chapters[chapters[index - 1].pid].pid;\n            break;\n    }\n\n    return pid;\n};\n\nif (window.jQuery) {\n    // 将 ArticleOutline 扩展为一个 jquery 插件\n    $.extend($.fn, {\n        articleOutline: function articleOutline(options) {\n            var $article = $(this);\n\n            return new AutocJs($.extend({}, options, {\n                article: $article\n            }));\n        }\n    });\n}\nreturn AutocJs;\n}));\n"]}